#!/usr/bin/env bash

OLD_BUILD_SYSTEM="${BUILD_SYSTEM}"
BUILD_SYSTEM="$(dirname "$(readlink -f "$BASH_SOURCE")")"

if [ _${OLD_BUILD_SYSTEM} != _${BUILD_SYSTEM} ]; then
  export BUILD_SYSTEM
  . ${BUILD_ROOT}/variables.64

  COMMON_CMAKE_OPTIONS="-G;Ninja"
  COMMON_CMAKE_OPTIONS="$COMMON_CMAKE_OPTIONS;-DCMAKE_BUILD_TYPE=${BUILD_TYPE:-Release}"
  COMMON_CMAKE_OPTIONS="$COMMON_CMAKE_OPTIONS;-DWITH_STATIC_RUNTIME=OFF"
  export COMMON_CMAKE_OPTIONS

  COPASI_CMAKE_OPTIONS="-DBUILD_SE=OFF"
  COPASI_CMAKE_OPTIONS="$COPASI_CMAKE_OPTIONS;-DENABLE_JAVA=ON"
  COPASI_CMAKE_OPTIONS="$COPASI_CMAKE_OPTIONS;-DENABLE_CSHARP=ON"
  COPASI_CMAKE_OPTIONS="$COPASI_CMAKE_OPTIONS;-DSELECT_QT=${SELECT_QT}"
  COPASI_CMAKE_OPTIONS="$COPASI_CMAKE_OPTIONS;-DSWIG_EXECUTABLE=${SWIG_EXECUTABLE}"
  COPASI_CMAKE_OPTIONS="$COPASI_CMAKE_OPTIONS;-DENABLE_JIT=ON"
  export COPASI_CMAKE_OPTIONS

  DEPENDENCIES_CMAKE_OPTIONS="-DCMAKE_INSTALL_PREFIX=$(convertPath ${INSTALL_DIR})"
  DEPENDENCIES_CMAKE_OPTIONS="$DEPENDENCIES_CMAKE_OPTIONS;-DBUILD_clapack=OFF"
  DEPENDENCIES_CMAKE_OPTIONS="$DEPENDENCIES_CMAKE_OPTIONS;-DBUILD_NativeJIT=ON"
  DEPENDENCIES_CMAKE_OPTIONS="$DEPENDENCIES_CMAKE_OPTIONS;-DBUILD_qwtplot3d=OFF"
  export DEPENDENCIES_CMAKE_OPTIONS
fi
